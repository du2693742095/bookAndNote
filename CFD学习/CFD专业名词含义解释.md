

# CFD软件体系

## 简介

CFD是计算流体动力学（Computational Fluid Dynamics）的英文缩写，其利用计算机求解流体流动过程中的质量传递、能量传递、动量传递以及化学反应问题。CFD是一种方法或者工具，解决对象是流体力学问题，利用手段是数值计算。

## CFD应用场合 

只要存在流体流动的场合均可应用CFD。随着计算机技术及计算机计算能力的发展，CFD以及广泛应用于航空航天、造船、汽车、食品、能源、石油化工、生物医学等领域，而且还在不断的向其他行业扩展。

## 市场常见软件

常见的CFD软件流程体系，计算流体力学、计算传热学理论研究和学习主要是针对前处理和求解器：

1.  **三维CAD建模**：Solidworks、UG、Catia
2.  **网格生成软件**：ICEM、Hypermesh
3.  **前处理**：设置物理模型（即使用的求解方程，例如湍流还是层流、可压还是不可压）和边界条件（入口与出口）
4.  **求解器**：Fluent、CFX、StarCD、OpenFoam等，根据前处理的条件生成离散代数方程组，迭代求解
5.  **后处理器**：Tecplot等，图形化显示计算结果，计算总参数和平均参数



# CFD名词解释

## 前处理

**定义流动计算域**：建立流体流动区域。告诉计算机流体流动发生的场合。

**计算域离散**：将流动计算区域离散成网格单元，网格实现了将一个大问题化解为多个小问题，将连续的问题化解为离散的问题，将微分方程转化为代数方程

**指定计算控制方程**：告诉计算机所要解决的流体流动遵循的物理规则。

**定义边界流动条件**：特定流动问题有特定的流动边界条件。

**定义初始时刻流动条件**：告诉计算机，零时刻计算域处于何种状态。

**求解参数定义**： 如指定串行或并行计算、计算过程监测、离散算法指定等。

**输出参数定义**：定义计算过程中一些计算参数输出。

## 计算求解

计算求解通常由计算机自动完成，一般不需要人工干预。在前处理指定完毕后，求解器读取所有的求解参数进行自动求解计算，直至求解完成。

## 计算后处理

通过计算后处理将计算求解得到的数据以直观的方式展示出来，便于解读和工程应用。数据展现的方式包括：

**数据表**：每一个网格节点上的物理量数据，通常为压力、速度等原始变量。

**曲线图**：反映物理量变化规律

**云图**：反映物理量空间分布

**矢量图**：反映矢量空间分布

**动画**：以动画形式反应物理量随时间变化



# 网格名词

## 单元和面

### 点(point/vertex)

 点是三维环境下的一个位置，由一个向量来定义。当点有很多时则被编译为一个*list*，并且每个点都使用一个表示在*list*位置的标签（*label*，编号顺序从*0*开始）来索引，*list*中既不能含有具有完全相同位置的两个不同点，也不能含有不属于任何平面上的点（点必须至少属于一个平面）。

### 面(face) 

  一个面是是一个有序的点*list*（也就是说*list*中的元素是点），其中点都由它们的标签进行索引，*list*中两个相邻的点之间代表一个边（*edge*），即按照*list*索引顺序遍历一遍所有的点相当于在面的边缘上走了一圈。所有的面也被编译成一个*list*（也就是说这个*list里面，每一个*元素是面）并由表示在*list*位置的标签进行索引。面的法向量由右手定则来定义（用右手握住面的边缘，四个手指顺着点标签的升序（*1-2-3-4~*）顺序方向，大拇指的方向就是面的法向量方向）。

![img](https://img-blog.csdn.net/20140317104428765?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveHh5aGp5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

面的种类有两种: 

**内部面**：这些面连接着两个体元（不可能超过两个），每个体元也有自己的标签，对于每个内部面来说，其法向量的方向指向那个标签号比较大的体元，例如连接*2*号和*5*号体元的内部面，其法向量指向标签号为*5*的体元。

**边界面**：这些面只属于一个体元，因为他们与计算区域的边界相连。因此这些面就由（而且是仅仅由）一个它们所属的体元以及一个*boundary patch*所标记。其点标签的顺序由其法向量的方向所定义，而边界面的法方向则被规定指向计算区域之外。

### 体/单元(cell)

一个体是一个面的list, 面在list中的顺序是任意的

**Contiguous**（邻接）：所有的体元必须完整地覆盖计算区域，而且不能相互重叠。

**Convex**（凸）：每个体元必须是凸多面体，而且中心要在体元内部。

**Closed**（封闭）：每个体元必须是闭合的，无论是几何上还是拓扑上。即：

- 几何封闭性要求：当所有面的面积向量（面积向量*——*大小等于多边形的面积而方向与多边形相垂直）向外地指向体元外的一点时，它们的向量和应该等于零（机器精度内）。

- 拓扑封闭性要求：体元所有的边都是由体元本身的两个面相交决定的，拓扑封闭性要求体元所有的边都必须完全地由体元的这两个面所拥有和使用，而不能延伸到第三个体元面上。

**正交性**：对于网格的内部面来说，我们定义一个中心对中心向量，中心对中心向量连接两个相互接壤的单元的中心，起点是标签编号较小的那个单元，终点是标签编号较大的那个单元。正交性限制要求对于每个内部面来说，面的面积向量与上述的中心对中心向量之间的夹角应该总小于*90*度。

### 边界条件

为了达到灵活应用边界条件的目的，一个边界首先被分解为一系列的*patch*。一个*patch*也许包含了一个或多个闭合边界面，但是并不一定在物理上是相连的。



## 划分网格的类型

### 非结构壳/面网格类型（二维）

壳/面网格 (Shell Mesh) 是指二维平面网络或三维曲面网格。平面网格可用于流体力学二维数值计算；壳网格既可以用于固体力学的数值计算，也可以作为生成非结构三维体网格的边界。下面首先介绍ICEM中壳/面网格的基本概念。

壳/面网格有四种网格类型，分别如下：

- All Tri，即所有网格单元均为三角形。
- Quad w/one Tri，即某一面上的网格单元大部分是四边形，最多允许有一个三角形网格单元。
- Quad Dominant，即某一面上的网格单元大部分是四边形，允许一部分三角形网格单元的存在。复杂的面适用于该种网格类型，此时如果生成全部四边形网格会导致网格质量非常低。对于简单的几何，该网格类型和Quad w/one Tri生成网格效果相似。

- All Quad，即所有面的网格单元均为四边形。

### 非结构壳/面网格生成方法

壳网格主要有四种生成方法，分别如下：

- Autoblock，自动块方法，自动在每个面上生成二维Block而后生成网格。

- Patch Dependent，根据面的轮廓线来生成网格，该方法能够较好地捕捉几何特征，创建以四边形为主的高质量网格（注意：轮廓线即围成面的线）。
- Patch Independent，网格生成过程不严格按照轮廓线，使用稳定的八叉树方法，生成网格过程中能够忽略缝隙(Gap)、洞(Hole) 等细小的几何特征，尤其适用于“不干净”的几何（注意：ICEM中的实体由封闭的面构成，“不干净”的几何是指由于缝隙、洞等存在，导致面没有完全封闭的几何，每种网格生成方法对几何封闭程度的要求不尽相同）。
- Shrinkwrap，是一种笛卡尔网络生成方法，会忽略大的几何特征、沟、洞等，适用于复杂“不干净”的几何模型快速生成壳网络，不适合薄板类实体网络生成。

###  非结构体网络类型（三维）

非结构体网格 (Auto Volume Meshing) 是指在ICEM中设定网格类型和生成方法等参数后，由软件自动计算得到的体网格。该方法生成网格过程中人工参与工作量较小，减轻了工程人员的负担，但是计算机工作量大，对计算机性能要求较高。生成的体网格可用于流体力学、固体力学的数值计算。

下面是三种不同的非结构体网格类型 (Mesh Type)：

- Tetra/Mixed，一种应用广泛的非结构体网格类型。在默认情况下，系统自动生成四面体网格 (Tetra)，通过设定可以创建三棱柱边界层网格 (Prism)，也可以在计算域内部生成以六面体单元为主的体网格 (Hexcore)，或者生成既包含边界层又包含六面体单元的网格。
- Hex-Dominant，一种以六面体网格单元为主的非结构体网格类型。近壁面处网格质量较好，但在非结构体网格内部网格质量较差。生成此类体网格时，需要壳/面网格的类型为All Quad 或 Quad Dominant。
- Cartesian，一种自动生成的六面体非结构体网格，内部网格线均为直线，边界处网格线适应边界曲线。



# 解算器名词

## 有限体积法

积分型方程可以直接由基本守恒定律导出，也可以通过把偏微分方程（组）在控制体上积分而得到。把空间求解域离散为完全覆盖求解域且互不重叠的区域，每个区域称为有限体积方法的控制体或者单元。有限体积方法的数值解为控制体上物理量的平均值或者某些特定点上的值，也可以是物理量在控制体中的某种分布（如多项式）。在每个控制体上，把积分型方程中的积分项（可能包括体积分、面积分、线积分等）近似的用数值积分来代替，从而把积分型方程近似为离散的代数方程组。通过求解代数方程组获得有限体积方法的近似解。

## 格心法&格点法

在非结构网格上，有限体积方法可以分为格心（cell-centered）格式和格点（cell-vertex）格式。

- 格心型未知量位于单元中心，控制体取为网格单元本身，数值通量需要在网格单元的面上进行计算，因此格心型离散对应着基于面的数据结构

- 格点型的未知量位于单元节点，控制体通常通过连接节点周围的单元中心和边的中点来构建，数值通量需要在由原网格的边构建的面上进行计算，因此格点型离散对应着基于边的数据结构。

对于同样的非结构网格，格心型离散比格点型离散包含更多的自由度，理论上会耗费更高的计算代价并获得更高的计算精度。然而另一方面，格心型的网格模板比格点型的网格模板稀疏，因此对于同样数目的未知量，格点型离散的数值精度又要高于格心型离散。



格心格式和格点格式各有其优缺点。格心型格式的优点是控制体形状简单，容易通过参数变换的方法进行各种数值积分，这对于发展高精度格式十分有利。此外，计算域边界为格心格式的边，边界条件的实施比较容易。其主要缺点是与格点格式相比，控制体数量比较多，存储量比较大。格点型格式的主要优点是控制体数量比较少；例如在二维三角形和三维四面体背景网格上，对偶网格控制体大约为背景网格控制体的1/2或者1/6；这也导致了内存消耗较低。其缺点是控制体形状复杂，二维时是多边形，三维时则为形状非常复杂的多面体（其面数往往多达几十个，且每个控制体面数可能不同），因此数值积分的计算量很大，难以构造高效的高精度格式。在边界处，对偶网格控制体不能完整地包围中心格点，使边界处计算误差增加。



# 中英文对照

- overset: 重叠
- overlap region: 重叠区域
- topology: 拓扑
- sliding: 滑移
- FV(Finite volume methods): 有限体积法